{"version":3,"file":"bootstrap-form-wizard.js","sources":["../../src/ts/DefaultOptions.ts","../../src/ts/BootstrapFormWizard.ts"],"sourcesContent":["/**\r\n * Propiedades y ajustes predeterminados para las opciones de Bootstrap Form Wizard.\r\n * @const {Object}\r\n */\r\nconst defaultOptions: {\r\n    backBtn?: HTMLButtonElement,\r\n    class   : {\r\n        activeStep: string,\r\n    },\r\n    lang: {\r\n        backBtn             : string,\r\n        nextBtn             : string,\r\n        nextBtnSubmit       : string,\r\n        fieldReqNotFocusable: string,\r\n    }\r\n    nextBtn?              : HTMLButtonElement,\r\n    onSubmit?             : Function,\r\n    onNext?               : Function,\r\n    onBack?               : Function,\r\n    onValidated?          : Function,\r\n    start                 : number,\r\n    submitForm            : boolean,\r\n    useBootstrapValidation: boolean,\r\n} = {\r\n    backBtn: undefined,\r\n    class  : {\r\n        activeStep: 'active',\r\n    },\r\n    lang: {\r\n        backBtn             : '< Back',\r\n        nextBtn             : 'Next >',\r\n        nextBtnSubmit       : 'Send',\r\n        fieldReqNotFocusable: 'A required field in the form is not focusable.',\r\n    },\r\n    nextBtn               : undefined,\r\n    onSubmit              : undefined,\r\n    onNext                : undefined,\r\n    onBack                : undefined,\r\n    onValidated           : undefined,\r\n    start                 : 1,\r\n    submitForm            : true,\r\n    useBootstrapValidation: false,\r\n}\r\n\r\nexport default defaultOptions;\r\n","/**\r\n * Bootstrap Form Wizard\r\n * @requires\r\n * @author Nixon Fabian Pati√±o Pacheco <xoni.patino@outlook.com>.\r\n * @version 1.0.0.\r\n * \r\n * @summary\r\n * - Falta agregar el codigo para validacion con bootstrap.\r\n * - Falta poner el atributo step como solo lectura, a traves de la function Object.defineProperty()\r\n */\r\n\r\nimport { Tab } from 'bootstrap';\r\nimport defaultOptions from './DefaultOptions';\r\n\r\nexport default class BootstrapFormWizard\r\n{\r\n    public static instances: Array<BootstrapFormWizard> = [];\r\n    public static defaultOptions: typeof defaultOptions = defaultOptions;\r\n\r\n    public readonly id   : string;\r\n    public element       : HTMLFormElement;\r\n    public elementWrapper: Element;\r\n    public options       : typeof defaultOptions;\r\n    public step          : number;\r\n    public stepList      : NodeListOf<HTMLElement>;\r\n    public stepPanelList : NodeListOf<HTMLElement>;\r\n\r\n    constructor(_dom: HTMLFormElement|string, _opts:  object = {}) {\r\n        // --\r\n        this.element        = (typeof _dom == 'string') ? document.querySelector(_dom) : _dom;\r\n        this.id             = (new Date()).getTime().toString();\r\n        this.elementWrapper = (this.element.dataset.bfwWrapper) ? document.querySelector(this.element.dataset.bfwWrapper) : this.element;\r\n\r\n        if ((!this.element) || (this.element.tagName.toLowerCase() != 'form'))\r\n            throw new Error('The form element is invalid.');\r\n        else if (!this.elementWrapper)\r\n            throw new Error('The wrapper element is invalid.');\r\n\r\n        this.element.id = (this.element.id) ? this.element.id : this.id;\r\n\r\n        // --\r\n        this.options = Object.assign(\r\n            {},\r\n            defaultOptions,\r\n            {\r\n                backBtn: this.elementWrapper.querySelector('button[data-bfw-action=\"back\"]'),\r\n                nextBtn: this.elementWrapper.querySelector('button[data-bfw-action=\"next\"]'),\r\n            },\r\n            _opts\r\n        );\r\n\r\n        if (\r\n            (!this.options.backBtn) || (this.options.backBtn.tagName.toLowerCase() != 'button') ||\r\n            (!this.options.nextBtn) || (this.options.nextBtn.tagName.toLowerCase() != 'button')\r\n        )\r\n            throw new Error('The selector of the back or next button is invalid.');\r\n\r\n        // --\r\n        this.options.backBtn.type      = 'button';\r\n        this.options.backBtn.innerHTML = this.options.lang.backBtn;\r\n        this.options.nextBtn.type      = 'button';\r\n        this.options.backBtn.setAttribute('form', this.element.id);\r\n        this.options.nextBtn.setAttribute('form', this.element.id);\r\n\r\n        // --\r\n        this.options.backBtn.onclick = event => { this.back() };\r\n        this.options.nextBtn.onclick = event => { this.next() };\r\n        this.element.onreset         = event => { this.goTo(1) };\r\n        this.element.onsubmit        = event => {\r\n            if (this.options.submitForm) {\r\n                if (typeof this.options.onSubmit == 'function')\r\n                    this.options.onSubmit(event);\r\n            }\r\n            else\r\n                event.preventDefault();\r\n        };\r\n\r\n        // --\r\n        this.loadListSteps();\r\n\r\n        // --\r\n        this.goTo(this.options.start);\r\n\r\n        // --\r\n        BootstrapFormWizard.instances.push(this);\r\n    }\r\n\r\n    // --\r\n    private checkValidityForm(): boolean {\r\n        let isValid = true;\r\n\r\n        if (!this.element.noValidate) {\r\n            if (!this.element.checkValidity()) {\r\n                let parentStepPanelElem: HTMLElement,\r\n                    inStepPanel        : boolean,\r\n                    arrStepPanel = Array.from(this.stepPanelList);\r\n\r\n                isValid = Array.from(this.element.elements)\r\n                    .filter(elem => {\r\n                        if ((elem == this.options.backBtn) || (elem == this.options.nextBtn))\r\n                            return false;\r\n                        else {\r\n                            parentStepPanelElem = elem.parentElement;\r\n                            inStepPanel = false;\r\n                            while (parentStepPanelElem) {\r\n                                if (arrStepPanel.includes(parentStepPanelElem)) {\r\n                                    inStepPanel = true;\r\n                                    return (arrStepPanel.indexOf(parentStepPanelElem) < this.step);\r\n                                }\r\n                                else if (parentStepPanelElem == this.elementWrapper)\r\n                                    break;\r\n\r\n                                parentStepPanelElem = parentStepPanelElem.parentElement;\r\n                            }\r\n\r\n                            if (!inStepPanel) {\r\n                                let bfwInStep = Number((<HTMLInputElement>elem).dataset.bfwInStep);\r\n                                if (!bfwInStep) bfwInStep = 1;\r\n                                return (bfwInStep <= this.step);\r\n                            }\r\n                        }\r\n                    })\r\n                    .every(elem => (<HTMLInputElement>elem).checkValidity());\r\n            }\r\n\r\n            if (typeof this.options.onValidated == 'function')\r\n                isValid = this.options.onValidated(isValid);\r\n        }\r\n\r\n        return isValid;\r\n    }\r\n\r\n    // --\r\n    private reportValidityForm() {\r\n        if (this.options.useBootstrapValidation) {}\r\n        else {\r\n            let invalidElem = Array.from(this.element.elements).find(elem => !(<HTMLInputElement>elem).checkValidity());\r\n\r\n            if (invalidElem) {\r\n                let parentStepPanelElem = invalidElem.parentElement,\r\n                    inStepPanel         = false,\r\n                    arrStepPanel        = Array.from(this.stepPanelList);\r\n\r\n                while (parentStepPanelElem) {\r\n                    if (arrStepPanel.includes(parentStepPanelElem)) {\r\n                        inStepPanel = true;\r\n                        this.goTo(arrStepPanel.indexOf(parentStepPanelElem) + 1);\r\n                        break;\r\n                    }\r\n                    else if (parentStepPanelElem == this.elementWrapper)\r\n                        break;\r\n\r\n                    parentStepPanelElem = parentStepPanelElem.parentElement;\r\n                }\r\n\r\n                if (!inStepPanel) {\r\n                    let bfwInStep = Number((<HTMLInputElement>invalidElem).dataset.bfwInStep);\r\n                    if (!bfwInStep) bfwInStep = 1;\r\n\r\n                    this.goTo(bfwInStep);\r\n                }\r\n\r\n                if ((<HTMLInputElement>invalidElem).reportValidity())\r\n                    alert(this.options.lang.fieldReqNotFocusable);\r\n            }\r\n        }\r\n    } \r\n\r\n    // --\r\n    public loadListSteps() {\r\n        this.stepList = this.elementWrapper.querySelectorAll('[data-bs-toggle=\"step\"]');\r\n\r\n        if (this.stepList.length == 0)\r\n            throw new Error('No step elements were found in the list.');\r\n        else {\r\n            let arrSelectors: Array<string> = [];\r\n\r\n            this.stepList.forEach((stepElem, index) => {\r\n                let stepPanelSelector = (stepElem.dataset.bsTarget) ? stepElem.dataset.bsTarget : stepElem.getAttribute('href'),\r\n                    stepPanelElem     = this.elementWrapper.querySelector(stepPanelSelector),\r\n                    stepNum           = (index + 1).toString();\r\n\r\n                if (stepPanelElem) {\r\n                    stepPanelElem.role = 'steppanel';\r\n                    stepPanelElem.setAttribute('panel', stepNum);\r\n\r\n                    arrSelectors.push(stepPanelSelector);\r\n                }\r\n                else\r\n                    throw new Error('The step panel for one of the steps in the list was not found.');\r\n\r\n                stepElem.setAttribute('step', stepNum);\r\n                stepElem.addEventListener('shown.bs.tab', event => {\r\n                    let currentStepElem  = <HTMLElement>event.target,\r\n                        indexCurrentStep = Array.from(this.stepList).indexOf(currentStepElem);\r\n\r\n                    this.step = indexCurrentStep + 1;\r\n                    \r\n                    if (this.step == 1)\r\n                        this.options.backBtn.setAttribute('disabled', '');\r\n                    else\r\n                        this.options.backBtn.removeAttribute('disabled');\r\n                    this.options.nextBtn.innerHTML = (this.step == this.stepList.length) ? this.options.lang.nextBtnSubmit : this.options.lang.nextBtn;\r\n                    this.options.nextBtn.type      = 'button';\r\n                });\r\n            });\r\n            \r\n            this.stepPanelList = this.elementWrapper.querySelectorAll(arrSelectors.join(', '));\r\n        }\r\n    }\r\n\r\n    // --\r\n    public reset() {\r\n        this.element.reset();\r\n    }\r\n\r\n    // --\r\n    public goTo(_step: number) {\r\n        let stepElem = this.stepList.item(_step - 1);\r\n\r\n        if (stepElem) {\r\n            Tab.getOrCreateInstance(stepElem).show();\r\n\r\n            if (!this.step) {\r\n                this.step = _step;\r\n\r\n                if (this.step == 1)\r\n                    this.options.backBtn.setAttribute('disabled', '');\r\n                else\r\n                    this.options.backBtn.removeAttribute('disabled');\r\n                this.options.nextBtn.innerHTML = (this.step == this.stepList.length) ? this.options.lang.nextBtnSubmit : this.options.lang.nextBtn;\r\n                this.options.nextBtn.type      = 'button';\r\n            }\r\n        }\r\n        else\r\n            throw new Error('The step number to display is less than or greater than the number of recordfed steps.');\r\n    }\r\n\r\n    // --\r\n    public back () {\r\n        if (this.stepList.item(this.step - 1)) {\r\n            this.goTo(this.step - 1);\r\n\r\n            if (typeof this.options.onBack == 'function')\r\n                this.options.onBack(this.step);\r\n        }   \r\n    }\r\n\r\n    // --\r\n    public next() {\r\n        if (!this.checkValidityForm())\r\n            this.reportValidityForm();\r\n        else if (this.step == this.stepList.length) {\r\n            this.options.nextBtn.type = 'submit';\r\n            this.element.requestSubmit(this.options.nextBtn);\r\n        }\r\n        else {\r\n            this.goTo(this.step + 1);\r\n            \r\n            if (typeof this.options.onNext == 'function')\r\n                this.options.onNext(this.step);\r\n        }\r\n    }\r\n\r\n}\r\n"],"names":["Tab"],"mappings":"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"}