!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("bootstrap")):"function"==typeof define&&define.amd?define(["bootstrap"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).BootstrapFormWizard=e(t.bootstrap)}(this,(function(t){"use strict";class e{static instances=[];static defaultOptions={lang:{backBtn:"< Back",nextBtn:"Next >",nextBtnSubmit:"Send",fieldReqNotFocusable:"A required field in the form is not focusable."},start:1,submitForm:!0,useBootstrapValidation:!1};id;element;elementWrapper;options;step;stepNavList;stepPanelList;constructor(t,i={}){if(this.element="string"==typeof t?document.querySelector(t):t,this.id=(new Date).getTime().toString(),this.elementWrapper=this.element.dataset.bfwWrapper?document.querySelector(this.element.dataset.bfwWrapper):this.element,!this.element||"form"!=this.element.tagName.toLowerCase())throw new Error("The form element is invalid.");if(!this.elementWrapper)throw new Error("The wrapper element is invalid.");if(this.element.id=this.element.id?this.element.id:this.id,this.options=Object.assign({},e.defaultOptions,i),this.options.backBtn||(this.options.backBtn=this.elementWrapper.querySelector('button[data-bfw-action="back"]')),this.options.nextBtn||(this.options.nextBtn=this.elementWrapper.querySelector('button[data-bfw-action="next"]')),!this.options.backBtn||"button"!=this.options.backBtn.tagName.toLowerCase()||!this.options.nextBtn||"button"!=this.options.nextBtn.tagName.toLowerCase())throw new Error("The selector of the back or next button is invalid.");this.options.backBtn.type="button",this.options.backBtn.innerHTML=this.options.lang.backBtn,this.options.nextBtn.type="button",this.options.backBtn.setAttribute("form",this.element.id),this.options.nextBtn.setAttribute("form",this.element.id),this.options.backBtn.onclick=t=>{this.back()},this.options.nextBtn.onclick=t=>{this.next()},this.element.onreset=t=>{this.goTo(1)},this.element.onsubmit=t=>{this.options.submitForm?"function"==typeof this.options.onSubmit&&this.options.onSubmit(t):t.preventDefault()},this.loadListSteps(),this.goTo(this.options.start),e.instances.push(this)}static forElement(t){return"string"==typeof t&&(t=document.querySelector(t)),t?e.instances.find((e=>e.element==t)):void 0}checkValidityForm(){let t=!0;if(!this.element.noValidate){if(!this.element.checkValidity()){let e,i,s=Array.from(this.stepPanelList);t=Array.from(this.element.elements).filter((t=>{if(t==this.options.backBtn||t==this.options.nextBtn)return!1;for(e=t.parentElement,i=!1;e;){if(s.includes(e))return i=!0,s.indexOf(e)<this.step;if(e==this.elementWrapper)break;e=e.parentElement}if(!i){let e=Number(t.dataset.bfwInStep);return e||(e=1),e<=this.step}})).every((t=>t.checkValidity()))}"function"==typeof this.options.onValidated&&(t=this.options.onValidated(t))}return t}getCurrentStep(){return{step:this.step,stepNav:this.stepNavList[this.step-1],stepPanel:this.stepPanelList[this.step-1]}}reportValidityForm(){if(this.options.useBootstrapValidation);else{let t=Array.from(this.element.elements).find((t=>!t.checkValidity()));if(t){let e=t.parentElement,i=!1,s=Array.from(this.stepPanelList);for(;e;){if(s.includes(e)){i=!0,this.goTo(s.indexOf(e)+1);break}if(e==this.elementWrapper)break;e=e.parentElement}if(!i){let e=Number(t.dataset.bfwInStep);e||(e=1),this.goTo(e)}t.reportValidity()&&alert(this.options.lang.fieldReqNotFocusable)}}}loadListSteps(){if(this.stepNavList=this.elementWrapper.querySelectorAll('[data-bs-toggle="step"]'),0==this.stepNavList.length)throw new Error("No step elements were found in the list.");{let t=[];this.stepNavList.forEach(((e,i)=>{let s=e.dataset.bsTarget?e.dataset.bsTarget:e.getAttribute("href"),n=this.elementWrapper.querySelector(s),o=(i+1).toString();if(!n)throw new Error("The step panel for one of the steps in the list was not found.");n.role="steppanel",n.setAttribute("panel",o),t.push(s),e.setAttribute("step",o),e.addEventListener("shown.bs.tab",(t=>{let e=t.target,i=Array.from(this.stepNavList).indexOf(e);this.step=i+1,1==this.step?this.options.backBtn.setAttribute("disabled",""):this.options.backBtn.removeAttribute("disabled"),this.options.nextBtn.innerHTML=this.step==this.stepNavList.length?this.options.lang.nextBtnSubmit:this.options.lang.nextBtn,this.options.nextBtn.type="button"}))})),this.stepPanelList=this.elementWrapper.querySelectorAll(t.join(", "))}}reset(){this.element.reset()}goTo(e){let i=this.stepNavList.item(e-1);if(!i)throw new Error("The step number to display is less than or greater than the number of recordfed steps.");t.Tab.getOrCreateInstance(i).show(),this.step||(this.step=e,1==this.step?this.options.backBtn.setAttribute("disabled",""):this.options.backBtn.removeAttribute("disabled"),this.options.nextBtn.innerHTML=this.step==this.stepNavList.length?this.options.lang.nextBtnSubmit:this.options.lang.nextBtn,this.options.nextBtn.type="button")}back(){this.stepNavList.item(this.step-1)&&(this.goTo(this.step-1),"function"==typeof this.options.onBack&&this.options.onBack(this.step))}next(){this.checkValidityForm()?this.step==this.stepNavList.length?this.options.nextBtn.form==this.element?this.options.nextBtn.type="submit":(this.options.nextBtn.type="submit",this.element.requestSubmit(this.options.nextBtn)):(this.goTo(this.step+1),"function"==typeof this.options.onNext&&this.options.onNext(this.step)):this.reportValidityForm()}}return e}));//# sourceMappingURL=bootstrap-form-wizard.min.js.map
